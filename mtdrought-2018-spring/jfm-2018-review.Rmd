---
title: "January--March, 2018: Current conditions"
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
source("./R/setup.R")

```

## {- .tabset .tabset-fade .tabset-pills}

La Nina didn't dissappoint! Reflecting on last winter...

### <img src="./icons/temperature.svg" width="35px"/> Temperature {-}
```{r past-seasonal-gridmet, collapse=TRUE, results='hold', message=FALSE, warning=FALSE, cache=TRUE}

gridmet <- mtd_get_gridmet(dates = c("2018-01-01",
                                     "2018-03-31"),
                           data_out = "../data/gridmet")

```


```{r past-seasonal-temp-grid, collapse=TRUE, results='hold', message=FALSE, warning=FALSE, cache=TRUE}
gridmet %>%
  mtd_plot_gridmet(element = "tmpc")
```


```{r past-seasonal-temp-grid-normals, collapse=TRUE, results='hold', message=FALSE, warning=FALSE, cache=TRUE}
gridmet %>%
  mtd_plot_gridmet(element = "tmpc",
                   use_normals = TRUE)
```


```{r past-seasonal-temp-counties, collapse=TRUE, results='hold', message=FALSE, warning=FALSE, cache=TRUE}
gridmet %>%
  mtd_plot_gridmet(element = "tmpc",
                   agg_sf = mt_counties_simple,
                   agg_sf_fun = median)
```


```{r past-seasonal-temp-counties-normals, collapse=TRUE, results='hold', message=FALSE, warning=FALSE, cache=TRUE}
gridmet %>%
  mtd_plot_gridmet(element = "tmpc",
                   agg_sf = mt_counties_simple,
                   agg_sf_fun = median,
                   use_normals = TRUE)
```


### <img src="./icons/precipitation.svg" width="35px"/> Precipitation {-}


```{r past-seasonal-prcp-grid, collapse=TRUE, results='hold', message=FALSE, warning=FALSE, cache=TRUE}
gridmet %>%
  mtd_plot_gridmet(element = "pcpn")
```


```{r past-seasonal-prcp-grid-normals, collapse=TRUE, results='hold', message=FALSE, warning=FALSE, cache=TRUE}
gridmet %>%
  mtd_plot_gridmet(element = "pcpn",
                   use_normals = TRUE)
```


```{r past-seasonal-prcp-counties, collapse=TRUE, results='hold', message=FALSE, warning=FALSE, cache=TRUE}
gridmet %>%
  mtd_plot_gridmet(element = "pcpn",
                   agg_sf = mt_counties_simple,
                   agg_sf_fun = median)
```


```{r past-seasonal-prcp-counties-normals, collapse=TRUE, results='hold', message=FALSE, warning=FALSE, cache=TRUE}
gridmet %>%
  mtd_plot_gridmet(element = "pcpn",
                   agg_sf = mt_counties_simple,
                   agg_sf_fun = median,
                   use_normals = TRUE)
```

### <img src="./icons/swe.svg" width="35px"/> Snowpack {-}

```{r past-seasonal-swe, collapse=TRUE, results='hold', message=FALSE, warning=FALSE, cache=TRUE}
past_seasonal_swe <- mtd_plot_swe_basins(date="2018-04-01")

past_seasonal_swe$map

```

#### Big Story: Blackfeet Blizzard {-}


### <img src="./icons/soil_saturation.svg" width="35px"/> Soil Moisture {-}


```{r past-seasonal-smap-grid, collapse=TRUE, results='hold', message=FALSE, warning=FALSE, cache=TRUE}
mtd_plot_smap(date = "2018-04-01",
              variable = "sm_rootzone",
              data_out = "../data/SMAP")$map
```


```{r past-seasonal-smap-grid-wetness, collapse=TRUE, results='hold', message=FALSE, warning=FALSE, cache=TRUE}
mtd_plot_smap(date = "2018-04-01",
              variable = "sm_rootzone_wetness",
              data_out = "../data/SMAP")$map
```


```{r past-seasonal-smap-counties, collapse=TRUE, results='hold', message=FALSE, warning=FALSE, cache=TRUE}
mtd_plot_smap(date = "2018-04-01",
              variable = "sm_rootzone",
              data_out = "../data/SMAP",
              agg_sf = mt_counties_simple,
              agg_fun = mean)$map
```


```{r past-seasonal-smap-counties-wetness, collapse=TRUE, results='hold', message=FALSE, warning=FALSE, cache=TRUE}
mtd_plot_smap(date = "2018-04-01",
              variable = "sm_rootzone_wetness",
              data_out = "../data/SMAP",
              agg_sf = mt_counties_simple,
              agg_fun = mean)$map
```

#### Snow and soil moisture recharge {-}
"Recharge rates" ...

### ![drought icon](./icons/drought.svg){width="35px"} Drought {-}
```{r past-seasonal-drought, collapse=TRUE, results='hold', message=FALSE, warning=FALSE, cache=TRUE}

past_seasonal_drought <- mtd_plot_usdm(date = "2018-04-01",
                                       data_out = "../data/USDM")

past_seasonal_drought$map

```

Not out of it yet in the northeast.

